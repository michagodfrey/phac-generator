<!-- PHAC Generator Demo App - HTML Structure Overview -->

<!-- Main HTML file structure -->
<html>
  <head>
    <title>PHAC Generator</title>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link href="style.css" rel="stylesheet" />
  </head>
  <body>
    <!-- Header -->
    <header>PHAC Generator</header>

    <!-- Temporary Test Button -->
    <div class="test-controls">
      <button type="button" id="fillDummyData" class="test-button">
        Fill with Test Data
      </button>
    </div>

    <!-- Certificate Form -->
    <form id="phacForm">
      <!-- Consignment Details -->
      <fieldset>
        <legend>Consignment Details</legend>

        <!-- Consignor Section -->
        <div class="consignment-group">
          <h3 class="section-title">Consignor Details</h3>
          <div class="input-group">
            <label class="input-label" for="consignorName">Name</label>
            <input
              type="text"
              id="consignorName"
              name="consignorName"
              required
            />
          </div>
          <div class="input-group">
            <label class="input-label" for="consignorAddress">Address</label>
            <textarea
              id="consignorAddress"
              name="consignorAddress"
              required
            ></textarea>
          </div>
        </div>

        <!-- Consignee Section -->
        <div class="consignment-group">
          <h3 class="section-title">Consignee Details</h3>
          <div class="input-group">
            <label class="input-label" for="consigneeName">Name</label>
            <input
              type="text"
              id="consigneeName"
              name="consigneeName"
              required
            />
          </div>
          <div class="input-group">
            <label class="input-label" for="consigneeAddress">Address</label>
            <textarea
              id="consigneeAddress"
              name="consigneeAddress"
              required
            ></textarea>
          </div>
        </div>

        <div class="form-grid">
          <div class="input-group">
            <label class="input-label" for="transportMethod"
              >Transport Method</label
            >
            <select id="transportMethod" name="transportMethod" required>
              <option value="">Select method</option>
              <option value="road">Road</option>
              <option value="rail">Rail</option>
              <option value="air">Air</option>
              <option value="sea">Sea</option>
            </select>
          </div>
          <div class="input-group">
            <label class="input-label" for="transportDetails"
              >Transport Details</label
            >
            <input
              type="text"
              id="transportDetails"
              name="transportDetails"
              placeholder="e.g., truck number"
            />
          </div>
        </div>

        <div class="checkbox-label">
          <input
            type="checkbox"
            id="sameAsCertifier"
            name="sameAsCertifier"
            checked
          />
          <label for="sameAsCertifier"
            >Same as grower/accredited certifier</label
          >
        </div>
      </fieldset>

      <!-- Certification Details -->
      <fieldset>
        <legend>Certification Details</legend>
        <div class="conditional-section">
          <div
            id="certifierFields"
            class="consignment-group conditional-fields"
            style="display: none"
          >
            <p class="conditional-text">
              To be completed if different to the consignor
            </p>
            <!-- Certifier Details -->
            <div class="form-grid">
              <div class="input-group">
                <label class="input-label" for="certifierName"
                  >Accredited Certifier Name</label
                >
                <input type="text" id="certifierName" name="certifierName" />
              </div>
              <div class="input-group">
                <label class="input-label" for="certifierAddress"
                  >Accredited Certifier Address</label
                >
                <textarea
                  id="certifierAddress"
                  name="certifierAddress"
                ></textarea>
              </div>
            </div>

            <!-- Grower Details -->
            <div class="form-grid">
              <div class="input-group">
                <label class="input-label" for="growerName"
                  >Grower or Packer Name</label
                >
                <input type="text" id="growerName" name="growerName" />
              </div>
              <div class="input-group">
                <label class="input-label" for="growerAddress"
                  >Grower or Packer Address</label
                >
                <textarea id="growerAddress" name="growerAddress"></textarea>
              </div>
            </div>
          </div>
        </div>

        <div class="form-grid">
          <div class="input-group">
            <label class="input-label" for="ipNumber">IP Number</label>
            <input
              type="text"
              id="ipNumber"
              name="ipNumber"
              placeholder="e.g., Q1234"
              required
            />
          </div>
          <div class="input-group">
            <label class="input-label" for="facilityNumber"
              >Facility Number</label
            >
            <input type="number" id="facilityNumber" name="facilityNumber" />
          </div>
        </div>

        <div class="form-grid">
          <div class="input-group">
            <label class="input-label" for="brandName">Brand Name</label>
            <input
              type="text"
              id="brandName"
              name="brandName"
              placeholder="Identifying marks on packages"
            />
          </div>
          <div class="input-group">
            <label class="input-label" for="dateCode">Date Code</label>
            <input
              type="text"
              id="dateCode"
              name="dateCode"
              placeholder="As marked on packages"
            />
          </div>
        </div>

        <div class="form-grid">
          <div class="input-group">
            <label class="input-label" for="procedureCode"
              >Procedure Code</label
            >
            <input
              type="text"
              id="procedureCode"
              name="procedureCode"
              placeholder="e.g., ICA-39"
              required
            />
          </div>
          <div class="input-group">
            <label class="input-label" for="accreditationExpiry"
              >Accreditation Expiry</label
            >
            <input
              type="date"
              id="accreditationExpiry"
              name="accreditationExpiry"
            />
          </div>
        </div>

        <button type="button" id="addAccreditation">
          Add Additional Accreditation
        </button>
      </fieldset>

      <!-- Treatment Details -->
      <fieldset>
        <legend>Treatment or Condition</legend>
        <div class="checkbox-label">
          <input type="checkbox" id="perAttachedList" name="perAttachedList" />
          <label for="perAttachedList">Per attached list</label>
        </div>

        <div class="input-group">
          <label class="input-label" for="invoiceNumber"
            >Invoice or Reference Number</label
          >
          <input type="text" id="invoiceNumber" name="invoiceNumber" />
        </div>

        <div class="treatment-fields">
          <div id="produceEntries">
            <div class="produce-set">
              <div class="form-grid">
                <div class="input-group">
                  <label class="input-label">Number of Packages</label>
                  <input type="number" name="numberOfPackages[]" />
                </div>
                <div class="input-group">
                  <label class="input-label">Package Type</label>
                  <input
                    type="text"
                    name="packageType[]"
                    placeholder="e.g., trays, cartons"
                  />
                </div>
                <div class="input-group">
                  <label class="input-label">Carrier Type</label>
                  <input type="text" name="carrierType[]" />
                </div>
              </div>
            </div>
          </div>
          <button type="button" id="addProduceEntry">+ Add Produce Row</button>
        </div>

        <div class="treatment-fields">
          <div class="input-group">
            <label class="input-label" for="treatmentSelect"
              >Treatment Type</label
            >
            <select id="treatmentSelect" name="treatmentSelect">
              <option value="">-- Select --</option>
              <option value="liquid">Liquid Insecticide Treatment</option>
              <option value="granular">Granular Insecticide Treatment</option>
            </select>
          </div>

          <div
            id="liquidTreatmentFields"
            class="treatment-fields"
            style="display: none"
          >
            <div class="input-group">
              <label class="input-label" for="liquidChemical"
                >Liquid Chemical</label
              >
              <select id="liquidChemical" name="liquidChemical">
                <option value="">Select Chemical</option>
                <option>bifenthrin 80g/L 2.5ml/L 28 days</option>
                <option>bifenthrin 100g/L 2ml/L 28 days</option>
                <option>bifenthrin 240g/L 0.8ml/L 28 days</option>
                <option>chrorpyrifos 500g/L 30-40ml/100L 28 days</option>
                <option>betacyfluthrin 25g/L 16ml/10L 72 hours</option>
              </select>
            </div>
          </div>

          <div
            id="granularTreatmentFields"
            class="treatment-fields"
            style="display: none"
          >
            <div class="input-group">
              <label class="input-label" for="granularChemical"
                >Granular Chemical</label
              >
              <select id="granularChemical" name="granularChemical">
                <option value="">Select Chemical</option>
                <option>bifenthrin 2g/kg 10ppm 10ppm 6 months</option>
                <option>bifenthrin 2g/kg 10ppm 12ppm 12 months</option>
                <option>bifenthrin 2g/kg 10ppm 15ppm 24 months</option>
                <option>chrorpyrifos 100g/kg 1kg/m3 12 months</option>
              </select>
            </div>
          </div>
        </div>

        <div class="input-group">
          <label class="input-label" for="additionalCertification"
            >Additional Certification</label
          >
          <textarea
            id="additionalCertification"
            name="additionalCertification"
            placeholder="e.g., Meets ICA-39"
          ></textarea>
        </div>
      </fieldset>

      <!-- Signature -->
      <fieldset>
        <legend>Declaration</legend>

        <div class="declaration-text">
          <p>
            I, an Authorised Signatory of the accredited certifier that prepared
            the Carrier of Biosecurity Matter described above, hereby declare
            that the Carrier of Biosecurity Matter have been prepared in the
            accredited certifier's approved facilities in accordance with the
            accreditation(s) granted to the accredited certifier under the
            Biosecurity Act 2014 and that the details shown above are true and
            correct in every particular.
          </p>
        </div>

        <div class="input-group">
          <label class="input-label" for="signatoryName"
            >Authorised Signatory's Name</label
          >
          <input type="text" id="signatoryName" name="signatoryName" required />
        </div>

        <div class="input-group">
          <label class="input-label">Signature</label>
          <div id="signature-pad"></div>
          <button type="button" id="clear-signature">Clear Signature</button>
        </div>

        <div class="input-group">
          <label class="input-label" for="issueDate">Issue Date</label>
          <input type="date" id="issueDate" name="issueDate" required />
        </div>
      </fieldset>

      <!-- Submit Button -->
      <button type="submit">Generate Certificate</button>
    </form>

    <!-- Result / PDF Preview -->
    <div id="pdfPreview" class="hidden"></div>

    <!-- Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/signature_pad@4.0.0/dist/signature_pad.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="app.js"></script>
  </body>
</html>
